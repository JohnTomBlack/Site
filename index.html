<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>JTB</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="wrap">
    <h1 class="name">John Black</h1>
    <div class="buttons">
        <a class="btn fuzzy" href="https://prints.johntomblack.com" target="_blank" rel="noopener noreferrer">
          <span class="btn-inner">Print Store</span>
          <div class="spots">
            <!-- 16 spots -->
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
          </div>
        </a>
        <a class="btn fuzzy" href="https://instagram.com/JohnTomBlack" target="_blank" rel="noopener noreferrer">
          <span class="btn-inner">Instagram</span>
          <div class="spots">
            <!-- 16 spots -->
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
            <span class="spot"></span><span class="spot"></span><span class="spot"></span><span class="spot"></span>
          </div>
        </a>
    </div>
  </main>
  <!-- Split heading into boxed letters, then randomize spot positions and retrigger bursts -->
  <script>
    // Convert the heading text into individual boxed letter spans
    (function(){
      const nameEl = document.querySelector('.name');
      if (nameEl){
        const text = nameEl.textContent || '';
        const frag = document.createDocumentFragment();
        for (const ch of text){
          if (ch === ' '){
            const sp = document.createElement('span');
            sp.className = 'letter space';
            sp.innerHTML = '&nbsp;';
            frag.appendChild(sp);
            continue;
          }
          const s = document.createElement('span');
          s.className = 'letter';
          s.textContent = ch;
          frag.appendChild(s);
        }
        nameEl.textContent = '';
        nameEl.appendChild(frag);
      }
    })();

    (function(){
      const fuzzies = document.querySelectorAll('.fuzzy');
      function shuffle(arr){
        for (let i = arr.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
      }
      function randomizeSpots(fuzzy){
        const rect = fuzzy.getBoundingClientRect();
        const spots = Array.from(fuzzy.querySelectorAll('.spot'));
        // build exactly 8 green and 8 purple, then shuffle
        const paletteNames = Array(8).fill('green').concat(Array(8).fill('purple'));
        shuffle(paletteNames);
        const palettes = {
          green: {h: 139, s: 100, l: 72},
          purple: {h: 259, s: 100, l: 72}
        };
        spots.forEach((spot, i)=>{
          const angle = Math.random()*Math.PI*2;
          const dist = (Math.random()*0.4 + 0.18) * Math.max(rect.width, rect.height);
          const tx = Math.cos(angle)*dist;
          const ty = Math.sin(angle)*dist;
          spot.style.setProperty('--tx', Math.round(tx) + 'px');
          spot.style.setProperty('--ty', Math.round(ty) + 'px');
          const size = 6 + Math.round(Math.random()*10);
          spot.style.width = size + 'px';
          spot.style.height = size + 'px';
          spot.style.borderRadius = (40 + Math.random()*60) + '%';
          spot.style.animationDelay = (Math.random()*0.35) + 's';
          // choose color type from shuffled array to ensure 8/8 distribution
          const type = paletteNames[i % paletteNames.length];
          const base = palettes[type];
          const variation = (Math.random()*30 - 15); // +/-15
          const l = Math.max(0, Math.min(100, base.l + variation));
          spot.style.background = `hsl(${base.h} ${base.s}% ${l}%)`;
          spot.classList.remove('spew');
          void spot.offsetWidth;
        });
      }
      fuzzies.forEach(f=>{
        if (!f) return;
        randomizeSpots(f);
        f.addEventListener('pointerenter', ()=>{
          randomizeSpots(f);
          const spots = f.querySelectorAll('.spot');
          spots.forEach(s=>{
            s.classList.add('spew');
            const onEnd = ()=>{ s.classList.remove('spew'); s.removeEventListener('animationend', onEnd); };
            s.addEventListener('animationend', onEnd);
          });
        });
        window.addEventListener('resize', ()=> randomizeSpots(f));
      });
    })();

    
  </script>
</body>
</html>
